## 第二张 寄存器
一个典型的CPU包括运算器/控制器/寄存器等器件构成,这些器件靠`内部总线`相连.

第一章中提到的地址总线/数据总线/控制总线相对于CPU来说是`外部总线`.

在CPU中:
* 运算器进行信息处理
* 寄存器进行信息存储
* 控制器控制各种器件进行工作
* 内部总线连接各种器件,在它们之间进行数据的传送

寄存器是CPU中程序员可以用指令读写的部件.程序员通过改变各种寄存器中的内容来实现对CPU的控制.

8086有14个CPU.

* 通用寄存器 general purpose registers
1. AX 累加器 Accumulator
   * 为了兼容8位机, 又分为AH AL
2. BX 基址寄存器 base register
   * 为了兼容8位机, 又分为BH BL
3. CX 计数器 count register
   * 为了兼容8位机, 又分为CH CL
4. DX 数据存储器 data register
   * 为了兼容8位机, 又分为DH DL

* 段寄存器 segment registers
1. CS code segment register
2. DS data segment register
3. ES extra segment register
4. SS stack segment register
* index registers
1. SI source index
2. DI destination index
* pointer registers
1. BP base pointer
2. SP stack pointer
3. IP instruction pointer
4. PSW
#### 2.1 通用寄存器
一个8位寄存器所能存储的数据的最大值为多少?
```text
可存2^8=256个数, 也就是0~255.
```
#### 2.2 字在寄存器中的存储
8086CPU一次性可以处理以下两种尺寸的数据:

* 字节: 记为byte, 8bit, 可以存在8位寄存器中.
* 字: 记为word, 一个字由两个字节组成,分别称为高位字节和低位字节.

```text
通常我们说的32位机, 64位机, 就是指字长为32/64. 8086CPU中字长就是8.
字长: 就是指CPU一次能并行处理的二进制位数,也等同于寄存器的宽度,等同于数据总线(内部数据总线)的宽度.

8088CPU和8086CPU都是16位机器,它们的内部总线宽度都为16,而8088外部总线宽度是8,8086外部总线宽度是16.
```

#### 2.3 几条汇编指令

| 汇编指令      | 控制CPU完成的操作            | 用高级语言的语法描述 |
|-----------|-----------------------|------------|
| mov ax,18 | 将18送入寄存器ax            | ax=18      |
| mov ah,78 | 将78送入寄存器ah            | ah=78      |
| add ax,8  | 将寄存器ax中的值加上8          | ax=ax+8    |
| mov ax,bx | 将寄存器bx的数据送入寄存器ax      | ax=bx      |
| add ax,bx | 将ax和bx中的数据相加,结果存放在ax中 | ax=ax+bx   |
| sub ax,7  | 将ax中的值减去7             | ax=ax-7    |
| inc ax    | ax中的值自增               | ax=ax+1    |
[可以支持简单汇编命令的在线编译器,包括mov/add/sub/inc命令](http://www.eecso.com/test/asm/)

```text
在汇编语言中,汇编指令和寄存器名称不区分大小写.比如mov和MOV,ax和AX都是一样的.

问题2.1的结论:如果高位相加,超过了16,比如8226H+8226H,本来应该等于1044CH,但是由于寄存器AX只能存放4字节,前面的1就被丢弃了(并不是真的丢弃,而是不能保存在这个寄存器中).
```

#### 检测点2.1
(1)如何将10进制的62627转换成16进制数
```text
62627/16=3914,余数为3 
3914/16=244,余数为10
244/16=15,余数为4
15/16=0,余数为15, 所以对应的16进制就是F4A3H
```
mov ax, 62627     AX=`F4A3H`

mov ah, 31H       AX=`25A3H`

mov al, 23H       AX=`?`

add ax, ax        AX=`?`

mov bx, 826CH     BX=`?`

mov cx, ax        CX=`?`

mov ax, bx        AX=`?`

add ax, bx        AX=`?`

mov al, bh        AX=`?`

mov ah, bl        AX=`?`

add ah, ah        AX=`?`

add al, 6         AX=`?`

add al, al        AX=`?`

mov ax, cx        AX=`?`

(2)
```text
mov ax, 2H
add ax, ax
add ax, ax
add ax, ax
``` 