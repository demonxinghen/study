### MySQL的的逻辑架构
* 最上层(客户端)
  * 包括连接处理、身份验证、确保安全性等
* 第二层(核心层)
  * 查询解析
  * 分析
  * 优化
  * 所有的内置函数
  * 存储引擎
  * 触发器
  * 视图
  * 等等
* 第三层(存储引擎层)
  * 负责MySQL中数据的存储和提取
  * 底层函数(比如开始一个事务、根据主键提取一行记录等操作)
  * 不会解析SQL(InnoDB是例外,会解析外键定义)
  * 不同存储引擎之间不会相互通信
### 连接管理与安全性
默认情况下,每个客户端连接都会在服务器进程中拥有一个线程,该连接的查询只会在这个单独的线程中执行,该线程驻留在一个内核或者CPU上.

服务器维护了一个缓存区,用于存放已就绪的线程,因此不需要为每个新的连接创建或销毁线程.

1) 客户端发起连接时,服务器需要对其进行身份验证(基于用户名、发起的主机名、密码)
2) 如果以TLS(跨传输层安全)的身份连接,还可以使用X.509证书认证
3) 连接成功后,服务器会继续验证该客户端是否具有其发出的每个查询的权限

### 优化与执行
1) MySQL解析查询以创建内部数据结构(解析树)
2) 然后对其进行各种优化,包括
   * 重写查询
   * 决定表的读取顺序
   * 选择合适的索引等等
3) 用户可以通过特殊关键字向优化器传递提示,从而影响优化器的决策过程
4) 也可以请求服务器解释优化过程的各个方面,使用户可以知道服务器是如何进行优化决策的
5) 在旧版本中,MySQL可以使用内部查询缓存(query cache)来查询是否可以直接提供结果,但是,随着并发性的增加,查询缓存成为一个让人诟病的瓶颈.从MySQL5.7.20版本开始,查询缓存已经被官方标注为被弃用的特性,并在8.0版本中完全移除