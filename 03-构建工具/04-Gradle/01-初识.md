### 安装gradle
要求: jdk8+

下载完后设置环境变量
### 创建一个Java项目
#### 创建一个目录demo,并进入
#### 在当前目录打开终端,执行命令gradle init
```shell
PS D:\demo> gradle init

Select type of project to generate:
  1: basic
  2: application
  3: library
  4: Gradle plugin
Enter selection (default: basic) [1..4] 2

Select implementation language:
  1: C++
  2: Groovy
  3: Java
  4: Kotlin
  5: Scala
  6: Swift
Enter selection (default: Java) [1..6] 3

Split functionality across multiple subprojects?:
  1: no - only one application project
  2: yes - application and library projects
Enter selection (default: no - only one application project) [1..2] 2

Select build script DSL:
  1: Groovy
  2: Kotlin
Enter selection (default: Groovy) [1..2] 1

Generate build using new APIs and behavior (some features may change in the next minor release)? (default: no) [yes, no]                                                                                                                       no

Project name (default: demo): demo
Source package (default: demo): demo

> Task :init
Get more help with your project: https://docs.gradle.org/8.0.1/samples/sample_building_java_applications_multi_project.html

BUILD SUCCESSFUL in 59s
2 actionable tasks: 2 executed
```
#### 查看目录结构
```text
├── gradle 
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew // 启动命令
├── gradlew.bat // 启动命令
├── settings.gradle // 配置文件,项目名和子项目名
├── buildSrc 
│   ├── build.gradle // 编译依赖配置
│   ├── settings.gradle 
│   └── src
│       └── main
│           └── groovy // 约定插件
│               ├── demo.java-application-conventions.gradle
│               ├── demo.java-common-conventions.gradle
│               └── demo.java-library-conventions.gradle
├── app
│   ├── build.gradle 
│   └── src
│       ├── main 
│       │   └── java
│       │       └── demo
│       │           └── app
│       │               ├── App.java
│       │               └── MessageUtils.java
│       └── test 
│           └── java
│               └── demo
│                   └── app
│                       └── MessageUtilsTest.java
├── list
│   ├── build.gradle 
│   └── src
│       ├── main 
│       │   └── java
│       │       └── demo
│       │           └── list
│       │               └── LinkedList.java
│       └── test 
│           └── java
│               └── demo
│                   └── list
│                       └── LinkedListTest.java
└── utilities
    ├── build.gradle 
    └── src
        └── main 
            └── java
                └── demo
                    └── utilities
                        ├── JoinUtils.java
                        ├── SplitUtils.java
                        └── StringUtils.java
```
#### 根目录下的settings.gradle文件
```groovy
rootProject.name = 'demo' // 根项目名
include('app', 'list', 'utilities') // 包含的子项目
```
### 使用buildSrc/src下的插件
查看buildSrc/src/main/groovy/demo.java-common-conventions.gradle
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the java Plugin to add support for Java.使用插件
    id 'java'
}

repositories {
    // Use Maven Central for resolving dependencies.依赖仓库
    mavenCentral()
}

dependencies {
    constraints {
        // Define dependency versions as constraints 依赖版本约束
        implementation 'org.apache.commons:commons-text:1.9'
    }

    // Use JUnit Jupiter for testing.
    testImplementation 'org.junit.jupiter:junit-jupiter:5.9.1'
}

tasks.named('test') {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
}
// 编译器标志和jvm版本兼容性也可以在这里配置
```
buildSrc/src/main/groovy/demo.java-application-conventions.gradle
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the common convention plugin for shared build configuration between library and application projects.
    id 'demo.java-common-conventions'

    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
}
```
buildSrc/src/main/groovy/demo.java-library-conventions.gradle
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the common convention plugin for shared build configuration between library and application projects.
    id 'demo.java-common-conventions'

    // Apply the java-library plugin for API and implementation separation.
    id 'java-library'
}
```
demo.java-application-conventions.gradle和demo.java-library-conventions.gradle都使用了插件demo.java-common-conventions, demo.java-common-conventions里的配置也可以在这两个插件里应用.
#### 子项目里的build.gradle
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'demo.java-application-conventions'
}

dependencies {
    implementation 'org.apache.commons:commons-text'
    implementation project(':utilities')
}

application {
    // Define the main class for the application.
    mainClass = 'demo.app.App'
}
```
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'demo.java-library-conventions'
}

dependencies {
    api project(':list')
}
```
1. 每个build.gradle都应该有plugins{}, 最好只有一个插件, 结构良好.
2. 如果有dependencies{}, project(...)表示依赖本地项目, '...'外部依赖.
3. 一个build.gradle可以有一个或多个配置{}. 有些配置是插件特有的, 比如application{}就是application插件特有的,用于设置mainClass.
#### buildSrc下的build.gradle
```groovy
/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Support convention plugins written in Groovy. Convention plugins are build scripts in 'src/main' that automatically become available as plugins in the main build.
    id 'groovy-gradle-plugin'
}

repositories {
    // Use the plugin portal to apply community plugins in convention plugins.
    gradlePluginPortal()
}
```
这个文件用于构建你自己的插件, 用来简化或辅助项目的构建, 而不是直接用于项目构建.

stance
